# README

## 注意点

モーターとGOPLUS2モジュールとの接続には、GOPLUS2モジュール付属の配線材を使用する。

前記配線材の長さは極めて短いため、そのままの状態ではモーターとの接続ができない。

そのため、下記手順により前記配線材の延長を行う。

### 配線材(GOPLUS2モジュール付属)の延長手順

1. GOPLUS2モジュール付属の配線材の先端を、ニッパー等で切り落とす。
2. ワイヤーストリッパーを用い、切り落とした端面から10mm程度、配線材の被覆を剥く。
3. 導体断面積:0.2~0.3sq, 長さ:30cm程度の配線材を4本用意し、2.と同様にして配線材の被覆を剥く。
4. 2.と3.で用意した配線材を撚り合わせる。
5. 撚り合わせた部分に、任意量のハンダを巻きつける。
6. ハンダこてを用い、巻きつけたハンダを溶かすことで、配線材の延長を行う。
7. ハンダが露出している長さ程度の熱収縮チューブを用意し、延長部に被せる。
8. ハンダこてを用い、熱収縮チューブを収縮させる。
9. テスターを用い、配線材(延長後)の導通確認を行う。

延長後、配線材の先端とモーターの端子部とをはんだ付けすることで、接点を取る。

-----

## 部品表

| No.  | 品名                                                         | 購入先             | 単価   | 数量 | 価格   |
| ---- | ------------------------------------------------------------ | ------------------ | ------ | ---- | ------ |
| 1    | [Anker PowerCore Slim 10000 PD 20W (10000mAh PD モバイルバッテリー 超大容量)【USB Power Delivery対応/PowerIQ搭載/PSE技術基準適合】 iPhone 12 iPad Air(第4世代) Android その他 各種機器対応](https://www.amazon.co.jp/gp/product/B08K31B6M2/ref=ppx_yo_dt_b_asin_title_o02_s00?ie=UTF8&psc=1) | Amazon             | 3,990  | 1    | 3,990  |
| 2    | [タミヤ 楽しい工作シリーズ No.168 ダブルギヤボックス 左右独立4速タイプ (70168)](https://www.amazon.co.jp/gp/product/B001Q13BIU/ref=ppx_yo_dt_b_asin_title_o02_s00?ie=UTF8&psc=1) | Amazon             | 653    | 1    | 653    |
| 3    | [タミヤ 楽しい工作シリーズ No.145 ナロータイヤセット 58mm径 (70145)](https://www.amazon.co.jp/gp/product/B001VZJDZ6/ref=ppx_yo_dt_b_asin_title_o02_s00?ie=UTF8&psc=1) | Amazon             | 385    | 1    | 385    |
| 4    | [タミヤ 楽しい工作シリーズ No.144 ボールキャスター 2セット入 (70144)](https://www.amazon.co.jp/gp/product/B001VZHRW2/ref=ppx_yo_dt_b_asin_title_o02_s00?ie=UTF8&psc=1) | Amazon             | 268    | 1    | 268    |
| 5    | [USB電源ケーブル Type-C PDトリガーケーブル DC プラグ 外径5.5mm/内径2.1mm（2.5mm) (9V 3A)](https://www.amazon.co.jp/gp/product/B08DTCLXRN/ref=ppx_yo_dt_b_asin_title_o01_s00?ie=UTF8&psc=1) | Amazon             | 1,380  | 1    | 1,380  |
|      |                                                              |                    | 計     |      | 6,676  |
|      |                                                              |                    |        |      |        |
| 6    | [M5Stack用GOPLUS2モジュール](https://www.switch-science.com/catalog/6736/) | スイッチサイエンス | 2,420  | 1    | 2,420  |
| 7    | [M5Stack Core2 for AWS - ESP32 IoT開発キット](https://www.switch-science.com/catalog/6784/) | スイッチサイエンス | 7,018  | 1    | 7,018  |
| 8    | [M5Stack UnitV2 AI カメラ（SSD202D）](https://www.switch-science.com/catalog/7160/) | スイッチサイエンス | 9,592  | 1    | 9,592  |
| 9    | [M5Stack用GROVE互換ケーブル 50 cm（2個入り）](https://www.switch-science.com/catalog/5215/) | スイッチサイエンス | 319    | 1    | 319    |
|      |                                                              |                    | 計     |      | 19,349 |
|      |                                                              |                    |        |      |        |
| 10   | [CAVS0.3SQ-2X6(A)](https://www.marutsu.co.jp/pc/i/2190499/)  | マルツオンライン   | 724    | 1    | 724    |
| 11   | [【ｽﾐﾁｭｰﾌﾞC2B】熱収縮チューブ 低温収縮型 2mm 黒 1mカット品](https://www.marutsu.co.jp/pc/i/10002/) | マルツオンライン   | 45     | 1    | 45     |
|      |                                                              |                    | 計     |      | 769    |
|      |                                                              |                    |        |      |        |
| 12   | カスタム品-1("シャシー.stl", PA12 ナチュラル(MJF))           | DMM.make           | 12,646 | 1    | 12,646 |
| 13   | カスタム品-2("留め具.stl", PA12 ナチュラル(MJF))             | DMM.make           | 1,930  | 1    | 1,930  |
|      |                                                              |                    | 計     |      | 14,576 |

-----

## 3Dモデル(組立て後)の説明

本モデルは、Autodesk Fusion 360にて作成した。

本モデルの状態を確認するには、"本体 v55.f3z"をAutodesk Fusion 360から開くこと。

本モデルには、3Dプリンタで出力するパーツ(カスタム品)の3Dモデルと、購入品の3Dモデルが含まれている。

各モデルの名称等は、下記の通り。

- 本体 v55.f3z
  - ボディ1(カスタム品, シャシー.stl)
  - コンポーネント1(カスタム品, 留め具.stl)
  - バッテリ(購入品, 部品表No.1)
  - モーター(購入品, 部品表No.2)
  - タイヤ(購入品, 部品表No.3)
  - ボールキャスター(購入品, 部品表No.4)
  - カメラ用マウント(購入品, 部品表No.8付属品)

-----

## 3Dプリンタで出力するパーツ

下記パーツを、DMM.makeで出力すること。

- "シャシー.stl" x 1個
- "留め具.stl" x 1個

出力時の材質は、"MJF, PA12 ナチュラル"とすること。

-----

## 各パーツ組付け時に使用するネジ

各パーツ組付け時に使用するネジは、部品表No.2, 部品表No.4付属のタッピングビスを使用する。

使用するタッピングビスは、3x12mmと3x8mmの2種類である。

3x8mmのタッピングビスは、部品表No.2のパーツをシャシーに対して固定するために使用する。

3x12mmのタッピングビスは、留め具をシャシーに対して固定するため、及び、部品表No.4のパーツをシャシーに対して固定するため、及び、部品表No.8付属のカメラ用マウント部品をシャシーに対して固定するために使用する。

-----

## モーター制御用ファームウェア("GOPLUS2.ino")

このファームウェアをM5Stackに書き込むと、GOPLUS2モジュールによるモーター制御が行えるようになる。

モーター制御を行うには、M5Stackとシリアル通信を確立する必要がある。

シリアル通信の設定条件は、下記の通り。

### シリアル通信の設定条件

- 受信用ポート(M5Stack, RX): 16番ピン
- 送信用ポート(M5Stack, TX): 17番ピン
- ボーレート: 115200bps
- データ長: 8bit
- パリティ: なし
- ストップビット: 1bit

モーター制御用コマンドは、下記の通り。なお、回転速度は、バイナリデータ(ASCII)で送信する必要があるため注意すること。

### モーター制御用コマンド

- 後退コマンド: "RWD\[SPD_MOT_0\]\[SPD_MOT_1\]\\n"
- 前進コマンド: "FWD\[SPD_MOT_0\]\[SPD_MOT_1\]\\n"
  - "\[SPD_MOT_0\], \[SPD_MOT_1\]"は、それぞれ1文字分のバイナリデータ(char)とする。
  - 文字データのエンコード形式は、"ASCII"とする。
  - "\[SPD_MOT_0\], \[SPD_MOT_1\]"で、モーターの回転速度を指定できる。
  - モーターの回転速度は"0~255"の範囲で指定できるが、上限値("60")を超えた場合、強制的に"60"に設定される。
- 停止コマンド: "STP\\n"

```pyserial```を使ったモーター制御の一例は、```motor_test.py```に記した通り。この例では、M5StackとUnitV2との間で、シリアル通信を確立している。接続の際は、GROVE互換ケーブルと[GROVE用 4ピン変換コネクタ（10個入り）](https://www.switch-science.com/catalog/7093/)、[普通のジャンパワイヤ（メス～メス）](https://www.switch-science.com/catalog/2295/)を使用した。
